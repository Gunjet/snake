<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake</title>
    <style>
        .board{
            background-color: pink;
            margin:30px auto;
            position:relative
        }
        .snake{
            background-color: black;
            border-radius: 10px;
            position:absolute;
        }
    </style>
</head>
<body>
    <div style="text-align: center;">
        <button onclick="startGame();">Start</button>
        <button onclick="pauseGame();">Pause</button>
        <button onclick="restartGame();">Restart</button>
    </div>
    <div class="board" id="board">
       <!-- generated -->
    </div>
    <div style="text-align: center;">
        <button onclick="changeDirection('up');">up</button>
        <button onclick="changeDirection('down');">down</button>
        <button onclick="changeDirection('left');">left</button>
        <button onclick="changeDirection('right');">right</button>
    </div>

    <script>
        let headTop=5;
        let headLeft=5;
        let direction= "right";
        let tails=[
            {x: 2, y: 5,},
            {x: 3, y: 5,},
            {x: 4, y: 5,}

        ]

        let intervalId=null;

        const config={
            size:20,
            width:30,
            height:20,
        }

        const boardEl=document.getElementById("board");
        boardEl.style.width=config.width*config.size+"px";
        boardEl.style.height=config.height*config.size+"px";

        function goUp(){
            headTop=headTop-1;
            if (headTop<0){
                headTop=config.height-1;
            }
            render()
        }

        function goDown(){
            headTop=headTop+1;
            if (headTop===config.height){
                headTop=0;
            }
            render()
        }

        function changeDirection(newDirection){
            if(direction==="up" ||  direction==="down"){
                if(newDirection==="right" || newDirection==="left"){
                    direction=newDirection;
                }
            } else if(direction==="right" || direction==="left"){
                if(newDirection==="up" || newDirection==="down"){
                    direction=newDirection
                }
            }
        }

        function goRight(){
            headLeft=headLeft+1;
            render()
        }

        function goLeft(){
            headLeft=headLeft-1;
            render()
        }

        function startGame(){
            if (!intervalId){
                intervalId=setInterval(gameLoop,300)
            }
        }

        function reset(){
            headTop=5;
            headLeft=5;
            direction="right";
            tails=[
                {x: 2, y: 5},
                {x: 3, y: 5},
                {x: 4, y: 5},
            ]
        }

        function restartGame(){
            reset();
            startGame();
        }

        function pauseGame(){
           clearInterval(intervalId);
           intervalId=null;
        }

        function gameLoop(){
            tails.push({x: headLeft, y: headTop});
            tails.shift()
            switch(direction){
              case "up":
                goUp();
                break;
              case "right":
                goRight();
                break;
              case "left":
                goLeft();
                break;
              case "down":
                goDown();
                break;
            }
        }

        function listenKeys(event){
            const key=event.key;
            switch(key){
                case "ArrowUp":
                    changeDirection("up");
                    break;
                case "ArrowDown":
                    changeDirection("down");
                    break;
                case "ArrowRight":
                    changeDirection("right");
                    break;
                case "ArrowLeft":
                    changeDirection("left");
                    break;
            }
        }

        document.addEventListener("keydown",listenKeys)

        function render(){
            let tailsHtml="";
             for(let i=0; i<tails.length; i++){
                tailsHtml+=`<div class="snake" style="width: ${1*config.size}px; height:${1*config.size}px; top: ${tails[i].y*config.size}px; left:${tails[i].x*config.size}px;"></div>`
             }

             const snakeHtml=`${tailsHtml}`;
             boardEl.innerHTML=snakeHtml;
        }
    </script>
</body>
</html>